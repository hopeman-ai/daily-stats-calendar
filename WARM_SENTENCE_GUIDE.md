# 따뜻한 한 문장 생성기 적용 가이드

## 📝 개요

"요즘 어때?" 서비스에서 하루의 기록을 바탕으로 **따뜻하고 연속성 있는 한 문장**을 생성하도록 개선했습니다.

## ✨ 주요 변경 사항

### 이전 방식
- 템플릿 기반의 단순한 요약문
- 예: "오늘은 에너지가 높았고, 집중과 휴식을 중심으로 보낸 하루였습니다."

### 새로운 방식
- **최근 7일 데이터 분석**: 에너지 패턴, 반복 태그 감지
- **연속성 표현**: "요즘", "최근", "계속" 등의 흐름 반영
- **따뜻한 톤**: 친구·가족이 건네는 말처럼 존재 인정
- **다양한 패턴**: 같은 조건에서도 다른 문장 생성

### 예시
- "요즘 계속 바빴던 걸 생각하면, 오늘은 더 숨 돌릴 틈이 없었을 것 같아. 그래도 여기까지 온 걸로 충분해."
- "최근 며칠을 보면, 오늘도 너 나름대로 하루를 버텨낸 것 같아."
- "큰 말은 없었지만, 요즘 흐름 속에서 오늘도 조용히 애쓴 하루였던 것 같아."

## 🔧 적용 방법

### 1. 백업 확인
이미 백업이 생성되어 있습니다:
- `index.html.backup` - 원본 파일

### 2. index.html 수정

`index.html` 파일의 **1062번째 줄부터 1121번째 줄**까지의 `generateDailySummary` 함수를 삭제하고, `warm-sentence-generator.js` 파일의 내용으로 교체합니다.

#### 삭제할 부분 (1062-1121줄)
```javascript
generateDailySummary(energy, tags, memo) {
    // ... 기존 코드 ...
}
```

#### 추가할 부분
`warm-sentence-generator.js` 파일의 모든 함수를 복사해서 붙여넣습니다:
1. `generateDailySummary()` - 메인 함수
2. `analyzeRecentDays()` - 최근 데이터 분석
3. `generateWarmSentence()` - 문장 생성 로직
4. `analyzeSentiment()` - 감정 분석
5. `generateContextualSentence()` - 맥락 기반 문장
6. `generateStandaloneSentence()` - 단독 문장

### 3. 테스트

1. 브라우저에서 `index.html` 열기
2. 여러 날짜에 데이터 입력 (최소 2-3일)
3. 새로운 날짜에 데이터 입력하고 요약 문장 확인
4. 다양한 패턴 (에너지 높음/낮음, 태그 반복 등) 테스트

## 📊 생성 로직 설명

### 최근 데이터 분석 (`analyzeRecentDays`)
- 오늘을 제외한 최근 7일 데이터 수집
- 에너지 패턴 분석:
  - `mostly_low`: 60% 이상 낮음
  - `mostly_high`: 60% 이상 높음
  - `some_low`: 2회 이상 낮음
- 반복 태그 감지 (2회 이상 등장)

### 문장 생성 전략

#### 1. 최근 흐름이 있는 경우 (`generateContextualSentence`)
- **에너지 계속 낮음 + 오늘도 낮음**
  - "요즘 계속 힘든 시간이었던 걸 생각하면..."

- **에너지 계속 낮음 + 오늘 회복**
  - "요즘 힘들었던 것 같은데, 오늘은 조금 나아진 것 같아..."

- **에너지 계속 높음 + 오늘도 높음**
  - "요즘 계속 바쁘게 달려온 것 같아..."

- **에너지 계속 높음 + 오늘 낮음**
  - "요즘 계속 바빴던 걸 생각하면, 오늘은 좀 쉬고 싶었을 것 같아..."

- **반복 태그 있음**
  - "요즘 계속 [태그] 중심으로 하루를 보내고 있는 것 같아..."

#### 2. 최근 데이터가 부족한 경우 (`generateStandaloneSentence`)
- 오늘 데이터만으로 문장 생성
- 에너지 상태와 감정 분석 기반

### 감정 분석 (`analyzeSentiment`)
메모의 키워드를 분석해서 감정 분류:
- `positive`: 좋, 행복, 기쁨, 즐거, 만족, 성공, 잘
- `difficult`: 힘들, 피곤, 지침, 어려, 아쉬, 실망, 불안, 버거
- `thoughtful`: 생각, 고민, 정리, 계획, 준비
- `neutral`: 기타

## 🎯 핵심 원칙

1. ✅ 오늘만 보지 않고 최근 흐름 반영
2. ✅ "요즘", "최근", "계속" 등 연속성 표현
3. ✅ 상태 설명 대신 '너' 중심 표현
4. ✅ 판단/조언/목표/개선/분석 금지
5. ✅ 따뜻하지만 담담한 톤
6. ✅ 1문장, 최대 2줄

## 📌 추가 커스터마이징

### 문장 패턴 추가
`generateContextualSentence()` 또는 `generateStandaloneSentence()` 함수의 `patterns.push()` 부분에 새로운 문장 추가 가능

### 분석 기간 변경
`generateDailySummary()` 함수의 `analyzeRecentDays(7)` 숫자를 변경하여 분석 기간 조정

### 감정 키워드 추가
`analyzeSentiment()` 함수의 `positiveWords`, `negativeWords`, `neutralWords` 배열에 키워드 추가

## 🔄 원복 방법

문제가 있을 경우 백업 파일로 복구:
```bash
cp index.html.backup index.html
```

## 📮 문의

이 기능에 대한 추가 수정이나 개선 사항이 있으면 언제든지 요청해주세요!
